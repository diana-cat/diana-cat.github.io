<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title> 
    <!-- <script>
        alert("Hi?")
        document.write("Hi) How are you?")
    </script> -->
</head>
<body>
    <header>
        <h1 id = "hka">Meow</h1>
        <script>
            hka.addEventListener("click", handler);
            function handler()
            {
                let h = document.getElementById('hka');
                h.style.background = 'red'; 
                h.innerText = "color";
                alert("yes. tyta");            
            }
        </script>
    </header>

    <main>
        <textarea name="color" id="text" cols="30" rows="10"></textarea>
        <div>
            <input type="button" value="Click here" id = "button">
        </div>
        <div id = "tbs"></div>
        <canvas id='canva'></canvas>
        
        <script>
            let textBoxes = [];
            canva.width  = 600;
            canva.height = 600;
            let canDo = true;

            document.getElementById("button").onclick = function() 
            {
                if(canDo == true)
                {
                    for(i = 0; i < document.getElementById("text").value; i++)
                {
                    textBoxes[i] = document.createElement("input");
                    textBoxes[i].type = "textbox";
                    textBoxes[i].value = GetRandomInt(1,100);
                    textBoxes[i].addEventListener("change", Diagramma);
                    tbs.append(textBoxes[i]);
                }
                Diagramma();
                canDo = false;
                }
            }

            function GetRandomInt(min, max) 
            {
                return Math.floor(Math.random() * (max - min)) + min;
            }

            let x =0, y = 0, w = 40;
            function Diagramma()
            {
			    let ctx = canva.getContext('2d'); 
                ctx.clearRect(x,y,canva.width, canva.height);
                
                let maxY = Number(TextBoxWithMaxValue().value) + 20;

                for(i = 0; i < textBoxes.length; i++)
                {
                    let localY = maxY - textBoxes[i].value;
                    ctx.fillStyle = SetColor();
                    ctx.fillRect(x + w*i, localY, w, textBoxes[i].value);
                }
            }



            function TextBoxWithMaxValue()
            {
                let textBox;
                textBox = textBoxes[0];
                for(i = 1; i < textBoxes.length; i++)
                {
                    if(Number(textBoxes[i].value) > Number(textBox.value))
                    {
                        textBox = textBoxes[i];
                    }
                }
                return textBox;
            }

            function SetColor()
            {
                //r = Math.floor(Math.random() * (256)),
                //g = Math.floor(Math.random() * (256)),
                //b = Math.floor(Math.random() * (256)),
                r = GetRandomInt(0, 256);
                g = GetRandomInt(0, 256);
                b = GetRandomInt(0, 256);
                
                color = '#' + r.toString(16) + g.toString(16) + b.toString(16)
                return color;
            }
        </script>
        
    </main>

    <footer>
        
    </footer>
</body>
</html>

